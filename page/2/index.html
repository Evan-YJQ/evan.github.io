<!DOCTYPE html>
<html lang="zh-Hans">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"evan-yjq.github.io","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="evan 互联网 程序员">
<meta property="og:type" content="website">
<meta property="og:title" content="Evan的小院">
<meta property="og:url" content="https://evan-yjq.github.io/page/2/index.html">
<meta property="og:site_name" content="Evan的小院">
<meta property="og:description" content="evan 互联网 程序员">
<meta property="article:author" content="Evan">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://evan-yjq.github.io/page/2/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-Hans'
  };
</script>

  <title>Evan的小院</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Evan的小院</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
        <li class="menu-item menu-item-pcrtool">

    <a href="/pcrtool/" rel="section"><i class="fa fa-calendar fa-fw"></i>pcrtool</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://evan-yjq.github.io/2018/02/04/Android%20ListView%E5%88%86%E7%B1%BB%E5%88%86%E7%BB%84%E6%95%88%E6%9E%9C/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Evan">
      <meta itemprop="description" content="evan 互联网 程序员">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Evan的小院">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/02/04/Android%20ListView%E5%88%86%E7%B1%BB%E5%88%86%E7%BB%84%E6%95%88%E6%9E%9C/" class="post-title-link" itemprop="url">Android ListView分类/分组效果</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2018-02-04 00:27:00 / Modified: 00:43:43" itemprop="dateCreated datePublished" datetime="2018-02-04T00:27:00+08:00">2018-02-04</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%AE%89%E5%8D%93/" itemprop="url" rel="index"><span itemprop="name">安卓</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>虽然现在有了ExpandableListView可以代替ListView进行分组显示，但是不能在显示分组的同时显示无分组数据，做不到更高级的自定义，所以我在网上找了这篇文章，以后可以用得上。以下所有ListView均可替换为RecyclerView进行重新实现。</p>
<h3 id="实现ListView分类显示效果，目前我知道的有两种方案："><a href="#实现ListView分类显示效果，目前我知道的有两种方案：" class="headerlink" title="实现ListView分类显示效果，目前我知道的有两种方案："></a>实现ListView分类显示效果，目前我知道的有两种方案：</h3><ol>
<li>每一个<code>ItemView</code>都包含用于显示分类信息的view(<code>TitleView</code>)和用于显示内容<code>view</code>(参考带索引的<code>listview</code>)</li>
<li>通过<code>ListView</code>加载不同类型的<code>Item</code>实现。本文属于这种实现方式</li>
</ol>
<h3 id="当前实现描述："><a href="#当前实现描述：" class="headerlink" title="当前实现描述："></a>当前实现描述：</h3><p>与自定义Adapter的ListVIew雷同，只是多使用两个BaseAdapter API：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getItemViewType</span> <span class="params">(<span class="keyword">int</span> position)</span>  </span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">获取通过getView为指定项目创建的视图的类型。  </span></span><br><span class="line"><span class="function">参数  </span></span><br><span class="line"><span class="function">    position 在adapter数据里我们想知道视图类型的项目的位置  </span></span><br><span class="line"><span class="function">返回值  </span></span><br><span class="line"><span class="function">    一个整形的视图类型的描述。如果一个视图通过<span class="title">getView</span><span class="params">(<span class="keyword">int</span>, View, ViewGroup)</span>方法转换成另一个视图，则两个视图将共享同一类型。注意：整形必须在0和<span class="title">getViewTypeCount</span><span class="params">()</span>– 1之间。IGNORE_ITEM_VIEW_TYPE也可以返回。  </span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getViewTypeCount</span> <span class="params">()</span>  </span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">返回通过<span class="title">getView</span><span class="params">(<span class="keyword">int</span>, View, ViewGroup)</span>)创建的视图的类型数量。每一个类型表示一组通过<span class="title">getView</span><span class="params">(<span class="keyword">int</span>, View, ViewGroup)</span>方法转换过的视图。如果adapter针对所有项目返回相同的视图类型，这个方法返回1。这个方法仅仅当adapter设置在AdapterView时调用。  </span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">返回值  </span></span><br><span class="line"><span class="function">通过这个adapter创建的视图类型的数量</span></span><br></pre></td></tr></table></figure>

<p>视图 – 在Adapter.getView中通过getItemViewType获取item类型，当前实现为分类item与普通item两种，根据类型创建不同的VIew对象<br>数据 – 分类的数据通过List包含自定义数据对象Category，Category内部包含List用于存储当前Category item数据。<br>覆写BaseAdapter.areAllItemsEnabled 和 BaseAdapter.isEnabled两个方法，确保分类Item不可点击</p>
<h3 id="代码："><a href="#代码：" class="headerlink" title="代码："></a>代码：</h3><h5 id="Activity"><a href="#Activity" class="headerlink" title="Activity:"></a>Activity:</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">Activity</span> </span>&#123;  </span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> CategoryAdapter mCustomBaseAdapter;  </span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span>  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;  </span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);  </span><br><span class="line">        setContentView(R.layout.main);  </span><br><span class="line"></span><br><span class="line">        ListView listView = (ListView) findViewById(R.id.listView1);  </span><br><span class="line"></span><br><span class="line">        <span class="comment">// 数据  </span></span><br><span class="line">        ArrayList&lt;Category&gt; listData = getData();  </span><br><span class="line"></span><br><span class="line">        mCustomBaseAdapter = <span class="keyword">new</span> CategoryAdapter(getBaseContext(), listData);  </span><br><span class="line"></span><br><span class="line">        <span class="comment">// 适配器与ListView绑定  </span></span><br><span class="line">        listView.setAdapter(mCustomBaseAdapter);  </span><br><span class="line"></span><br><span class="line">        listView.setOnItemClickListener(<span class="keyword">new</span> ItemClickListener());  </span><br><span class="line">    &#125;  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">ItemClickListener</span> <span class="keyword">implements</span> <span class="title">OnItemClickListener</span> </span>&#123;  </span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span>  </span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onItemClick</span><span class="params">(AdapterView&lt;?&gt; parent, View view, <span class="keyword">int</span> position,  </span></span></span><br><span class="line"><span class="function"><span class="params">                <span class="keyword">long</span> id)</span> </span>&#123;  </span><br><span class="line">            Toast.makeText(getBaseContext(),  (String)mCustomBaseAdapter.getItem(position),  </span><br><span class="line">                    Toast.LENGTH_SHORT).show();  </span><br><span class="line">        &#125;  </span><br><span class="line"></span><br><span class="line">    &#125;  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/** </span></span><br><span class="line"><span class="comment">     * 创建测试数据 </span></span><br><span class="line"><span class="comment">     */</span>  </span><br><span class="line">    <span class="function"><span class="keyword">private</span> ArrayList&lt;Category&gt; <span class="title">getData</span><span class="params">()</span> </span>&#123;  </span><br><span class="line">        ArrayList&lt;Category&gt; listData = <span class="keyword">new</span> ArrayList&lt;Category&gt;();  </span><br><span class="line">        Category categoryOne = <span class="keyword">new</span> Category(<span class="string">"路人甲"</span>);  </span><br><span class="line">        categoryOne.addItem(<span class="string">"马三立"</span>);  </span><br><span class="line">        categoryOne.addItem(<span class="string">"赵本山"</span>);  </span><br><span class="line">        categoryOne.addItem(<span class="string">"郭德纲"</span>);  </span><br><span class="line">        categoryOne.addItem(<span class="string">"周立波"</span>);  </span><br><span class="line">        Category categoryTwo = <span class="keyword">new</span> Category(<span class="string">"事件乙"</span>);  </span><br><span class="line">        categoryTwo.addItem(<span class="string">"**贪污"</span>);  </span><br><span class="line">        categoryTwo.addItem(<span class="string">"**照门"</span>);  </span><br><span class="line">        Category categoryThree = <span class="keyword">new</span> Category(<span class="string">"书籍丙"</span>);  </span><br><span class="line">        categoryThree.addItem(<span class="string">"10天学会***"</span>);  </span><br><span class="line">        categoryThree.addItem(<span class="string">"**大全"</span>);  </span><br><span class="line">        categoryThree.addItem(<span class="string">"**秘籍"</span>);  </span><br><span class="line">        categoryThree.addItem(<span class="string">"**宝典"</span>);  </span><br><span class="line">        categoryThree.addItem(<span class="string">"10天学会***"</span>);  </span><br><span class="line">        categoryThree.addItem(<span class="string">"10天学会***"</span>);  </span><br><span class="line">        categoryThree.addItem(<span class="string">"10天学会***"</span>);  </span><br><span class="line">        categoryThree.addItem(<span class="string">"10天学会***"</span>);  </span><br><span class="line">        Category categoryFour = <span class="keyword">new</span> Category(<span class="string">"书籍丙"</span>);  </span><br><span class="line">        categoryFour.addItem(<span class="string">"河南"</span>);  </span><br><span class="line">        categoryFour.addItem(<span class="string">"天津"</span>);  </span><br><span class="line">        categoryFour.addItem(<span class="string">"北京"</span>);  </span><br><span class="line">        categoryFour.addItem(<span class="string">"上海"</span>);  </span><br><span class="line">        categoryFour.addItem(<span class="string">"广州"</span>);  </span><br><span class="line">        categoryFour.addItem(<span class="string">"湖北"</span>);  </span><br><span class="line">        categoryFour.addItem(<span class="string">"重庆"</span>);  </span><br><span class="line">        categoryFour.addItem(<span class="string">"山东"</span>);  </span><br><span class="line">        categoryFour.addItem(<span class="string">"陕西"</span>);  </span><br><span class="line"></span><br><span class="line">        listData.add(categoryOne);  </span><br><span class="line">        listData.add(categoryTwo);  </span><br><span class="line">        listData.add(categoryThree);  </span><br><span class="line">        listData.add(categoryFour);  </span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> listData;  </span><br><span class="line">    &#125;     </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="Adapter"><a href="#Adapter" class="headerlink" title="Adapter:"></a>Adapter:</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CategoryAdapter</span> <span class="keyword">extends</span> <span class="title">BaseAdapter</span> </span>&#123;  </span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> TYPE_CATEGORY_ITEM = <span class="number">0</span>;  </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> TYPE_ITEM = <span class="number">1</span>;  </span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> ArrayList&lt;Category&gt; mListData;  </span><br><span class="line">    <span class="keyword">private</span> LayoutInflater mInflater;  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CategoryAdapter</span><span class="params">(Context context, ArrayList&lt;Category&gt; pData)</span> </span>&#123;  </span><br><span class="line">        mListData = pData;  </span><br><span class="line">        mInflater = LayoutInflater.from(context);  </span><br><span class="line">    &#125;  </span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span>  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getCount</span><span class="params">()</span> </span>&#123;  </span><br><span class="line">        <span class="keyword">int</span> count = <span class="number">0</span>;  </span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">null</span> != mListData) &#123;  </span><br><span class="line">            <span class="comment">//  所有分类中item的总和是ListVIew  Item的总个数  </span></span><br><span class="line">            <span class="keyword">for</span> (Category category : mListData) &#123;  </span><br><span class="line">                count += category.getItemCount();  </span><br><span class="line">            &#125;  </span><br><span class="line">        &#125;  </span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> count;  </span><br><span class="line">    &#125;  </span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span>  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">getItem</span><span class="params">(<span class="keyword">int</span> position)</span> </span>&#123;  </span><br><span class="line"></span><br><span class="line">        <span class="comment">// 异常情况处理  </span></span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">null</span> == mListData || position &lt;  <span class="number">0</span>|| position &gt; getCount()) &#123;  </span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;   </span><br><span class="line">        &#125;  </span><br><span class="line"></span><br><span class="line">        <span class="comment">// 同一分类内，第一个元素的索引值  </span></span><br><span class="line">        <span class="keyword">int</span> categroyFirstIndex = <span class="number">0</span>;  </span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (Category category : mListData) &#123;  </span><br><span class="line">            <span class="keyword">int</span> size = category.getItemCount();  </span><br><span class="line">            <span class="comment">// 在当前分类中的索引值  </span></span><br><span class="line">            <span class="keyword">int</span> categoryIndex = position - categroyFirstIndex;  </span><br><span class="line">            <span class="comment">// item在当前分类内  </span></span><br><span class="line">            <span class="keyword">if</span> (categoryIndex &lt; size) &#123;  </span><br><span class="line">                <span class="keyword">return</span>  category.getItem( categoryIndex );  </span><br><span class="line">            &#125;  </span><br><span class="line"></span><br><span class="line">            <span class="comment">// 索引移动到当前分类结尾，即下一个分类第一个元素索引  </span></span><br><span class="line">            categroyFirstIndex += size;  </span><br><span class="line">        &#125;  </span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;  </span><br><span class="line">    &#125;  </span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span>  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getItemViewType</span><span class="params">(<span class="keyword">int</span> position)</span> </span>&#123;  </span><br><span class="line">        <span class="comment">// 异常情况处理  </span></span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">null</span> == mListData || position &lt;  <span class="number">0</span>|| position &gt; getCount()) &#123;  </span><br><span class="line">            <span class="keyword">return</span> TYPE_ITEM;   </span><br><span class="line">        &#125;  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> categroyFirstIndex = <span class="number">0</span>;  </span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (Category category : mListData) &#123;  </span><br><span class="line">            <span class="keyword">int</span> size = category.getItemCount();  </span><br><span class="line">            <span class="comment">// 在当前分类中的索引值  </span></span><br><span class="line">            <span class="keyword">int</span> categoryIndex = position - categroyFirstIndex;  </span><br><span class="line">            <span class="keyword">if</span> (categoryIndex == <span class="number">0</span>) &#123;  </span><br><span class="line">                <span class="keyword">return</span> TYPE_CATEGORY_ITEM;  </span><br><span class="line">            &#125;  </span><br><span class="line"></span><br><span class="line">            categroyFirstIndex += size;  </span><br><span class="line">        &#125;  </span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> TYPE_ITEM;  </span><br><span class="line">    &#125;  </span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span>  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getViewTypeCount</span><span class="params">()</span> </span>&#123;  </span><br><span class="line">        <span class="keyword">return</span> <span class="number">2</span>;  </span><br><span class="line">    &#125;  </span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span>  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">long</span> <span class="title">getItemId</span><span class="params">(<span class="keyword">int</span> position)</span> </span>&#123;  </span><br><span class="line">        <span class="keyword">return</span> position;  </span><br><span class="line">    &#125;  </span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span>  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> View <span class="title">getView</span><span class="params">(<span class="keyword">int</span> position, View convertView, ViewGroup parent)</span> </span>&#123;  </span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> itemViewType = getItemViewType(position);  </span><br><span class="line">        <span class="keyword">switch</span> (itemViewType) &#123;  </span><br><span class="line">        <span class="keyword">case</span> TYPE_CATEGORY_ITEM:  </span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">null</span> == convertView) &#123;  </span><br><span class="line">                convertView = mInflater.inflate(R.layout.listview_item_header, <span class="keyword">null</span>);  </span><br><span class="line">            &#125;  </span><br><span class="line"></span><br><span class="line">            TextView textView = (TextView) convertView.findViewById(R.id.header);  </span><br><span class="line">            String  itemValue = (String) getItem(position);  </span><br><span class="line">            textView.setText( itemValue );  </span><br><span class="line">            <span class="keyword">break</span>;  </span><br><span class="line"></span><br><span class="line">        <span class="keyword">case</span> TYPE_ITEM:  </span><br><span class="line">            ViewHolder viewHolder = <span class="keyword">null</span>;  </span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">null</span> == convertView) &#123;  </span><br><span class="line"></span><br><span class="line">                convertView = mInflater.inflate(R.layout.listview_item, <span class="keyword">null</span>);  </span><br><span class="line"></span><br><span class="line">                viewHolder = <span class="keyword">new</span> ViewHolder();  </span><br><span class="line">                viewHolder.content = (TextView) convertView.findViewById(R.id.content);  </span><br><span class="line">                viewHolder.contentIcon = (ImageView) convertView.findViewById(R.id.content_icon);  </span><br><span class="line">                convertView.setTag(viewHolder);  </span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;  </span><br><span class="line">                viewHolder = (ViewHolder) convertView.getTag();  </span><br><span class="line">            &#125;  </span><br><span class="line"></span><br><span class="line">             <span class="comment">// 绑定数据  </span></span><br><span class="line">            viewHolder.content.setText( (String)getItem(position) );  </span><br><span class="line">            viewHolder.contentIcon.setImageResource(R.drawable.ic_launcher);  </span><br><span class="line">            <span class="keyword">break</span>;  </span><br><span class="line">        &#125;  </span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> convertView;  </span><br><span class="line">    &#125;  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span>  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">areAllItemsEnabled</span><span class="params">()</span> </span>&#123;  </span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;  </span><br><span class="line">    &#125;  </span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span>  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isEnabled</span><span class="params">(<span class="keyword">int</span> position)</span> </span>&#123;  </span><br><span class="line">        <span class="keyword">return</span> getItemViewType(position) != TYPE_CATEGORY_ITEM;  </span><br><span class="line">    &#125;  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">ViewHolder</span> </span>&#123;  </span><br><span class="line">        TextView content;  </span><br><span class="line">        ImageView contentIcon;  </span><br><span class="line">    &#125;  </span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="数据对象"><a href="#数据对象" class="headerlink" title="数据对象:"></a>数据对象:</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Category</span> </span>&#123;  </span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String mCategoryName;  </span><br><span class="line">    <span class="keyword">private</span> List&lt;String&gt; mCategoryItem = <span class="keyword">new</span> ArrayList&lt;String&gt;();  </span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Category</span><span class="params">(String mCategroyName)</span> </span>&#123;  </span><br><span class="line">        mCategoryName = mCategroyName;  </span><br><span class="line">    &#125;  </span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getmCategoryName</span><span class="params">()</span> </span>&#123;  </span><br><span class="line">        <span class="keyword">return</span> mCategoryName;  </span><br><span class="line">    &#125;  </span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addItem</span><span class="params">(String pItemName)</span> </span>&#123;  </span><br><span class="line">        mCategoryItem.add(pItemName);  </span><br><span class="line">    &#125;  </span><br><span class="line"></span><br><span class="line">    <span class="comment">/** </span></span><br><span class="line"><span class="comment">     *  获取Item内容 </span></span><br><span class="line"><span class="comment">     *  </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> pPosition </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> </span></span><br><span class="line"><span class="comment">     */</span>  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getItem</span><span class="params">(<span class="keyword">int</span> pPosition)</span> </span>&#123;  </span><br><span class="line">        <span class="comment">// Category排在第一位  </span></span><br><span class="line">        <span class="keyword">if</span> (pPosition == <span class="number">0</span>) &#123;  </span><br><span class="line">            <span class="keyword">return</span> mCategoryName;  </span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;  </span><br><span class="line">            <span class="keyword">return</span> mCategoryItem.get(pPosition - <span class="number">1</span>);  </span><br><span class="line">        &#125;  </span><br><span class="line">    &#125;  </span><br><span class="line"></span><br><span class="line">    <span class="comment">/** </span></span><br><span class="line"><span class="comment">     * 当前类别Item总数。Category也需要占用一个Item </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>  </span></span><br><span class="line"><span class="comment">     */</span>  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getItemCount</span><span class="params">()</span> </span>&#123;  </span><br><span class="line">        <span class="keyword">return</span> mCategoryItem.size() + <span class="number">1</span>;  </span><br><span class="line">    &#125;  </span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>




      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://evan-yjq.github.io/2018/02/02/Android%E5%A5%BD%E7%94%A8%E7%9A%84%E6%97%A5%E5%8E%86%E6%8E%A7%E4%BB%B6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Evan">
      <meta itemprop="description" content="evan 互联网 程序员">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Evan的小院">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/02/02/Android%E5%A5%BD%E7%94%A8%E7%9A%84%E6%97%A5%E5%8E%86%E6%8E%A7%E4%BB%B6/" class="post-title-link" itemprop="url">Android好用的日历控件</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-02-02 23:27:04" itemprop="dateCreated datePublished" datetime="2018-02-02T23:27:04+08:00">2018-02-02</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2018-02-03 00:08:10" itemprop="dateModified" datetime="2018-02-03T00:08:10+08:00">2018-02-03</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%AE%89%E5%8D%93/" itemprop="url" rel="index"><span itemprop="name">安卓</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><img src="/2018/02/02/Android%E5%A5%BD%E7%94%A8%E7%9A%84%E6%97%A5%E5%8E%86%E6%8E%A7%E4%BB%B6/1.png" alt="1"></p>
<h2 id="需求"><a href="#需求" class="headerlink" title="需求"></a>需求</h2><p>最近项目中需要用到日历控件，需求如下</p>
<ol>
<li>同时支持周模式和月模式</li>
<li>支持边界设置，有些地方要求只显示当前周和下一周</li>
<li>支持日期禁用，某些特定的日期不允许点击</li>
<li>支持自定义的选中日期的样式</li>
<li>左右滑动自动切换周、月，同时自动选中同等位置的日期。</li>
</ol>
<p>找来找去，最后发现GitHub的<a href="https://link.jianshu.com/?t=https://github.com/prolificinteractive/material-calendarview" target="_blank" rel="noopener">material-calendarview</a>这个项目最贴近以上需求，稍作修改就能用了。</p>
<h2 id="material-calendarview"><a href="#material-calendarview" class="headerlink" title="material-calendarview"></a>material-calendarview</h2><p>项目开源地址：</p>
<p><a href="https://link.jianshu.com/?t=https://github.com/prolificinteractive/material-calendarview" target="_blank" rel="noopener">https://github.com/prolificinteractive/material-calendarview</a></p>
<h3 id="集成清单"><a href="#集成清单" class="headerlink" title="集成清单"></a>集成清单</h3><ol>
<li>添加<code>compile &#39;com.prolificinteractive:material-calendarview:1.4.3&#39;</code></li>
<li>添加日历控件到布局中</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">com.prolificinteractive.materialcalendarview.MaterialCalendarView</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">"http://schemas.android.com/apk/res-auto"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">"@+id/calendarView"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:mcv_showOtherDates</span>=<span class="string">"all"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:mcv_selectionColor</span>=<span class="string">"#00F"</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="功能展示"><a href="#功能展示" class="headerlink" title="功能展示"></a>功能展示</h3><p>material-calendarview项目提供9个Sample来展示其功能用法</p>
<h4 id="一、对照组：OldCalendarViewActivity"><a href="#一、对照组：OldCalendarViewActivity" class="headerlink" title="一、对照组：OldCalendarViewActivity"></a>一、对照组：OldCalendarViewActivity</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">CalendarView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/calendarView"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"300dp"</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<p>采用系统控件<code>CalendarView</code>，实现一个点击显示日期的功能，可惜在低版本Android手机上没有material的样式，颜值很低，不能用。</p>
<h4 id="二、基本用法：BasicActivity"><a href="#二、基本用法：BasicActivity" class="headerlink" title="二、基本用法：BasicActivity"></a>二、基本用法：BasicActivity</h4><ol>
<li>绑定控件</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bind</span>(R.id.calendarView)</span><br><span class="line">MaterialCalendarView widget;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li><code>OnDateSelectedListener</code>：用来监听选中日期的变化，</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * The callback used to indicate a date has been selected or deselected</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">OnDateSelectedListener</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Called when a user clicks on a day.</span></span><br><span class="line"><span class="comment">     * There is no logic to prevent multiple calls for the same date and state.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> widget   the view associated with this listener</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> date     the date that was selected or unselected</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> selected true if the day is now selected, false otherwise</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">onDateSelected</span><span class="params">(@NonNull MaterialCalendarView widget, @NonNull CalendarDay date, <span class="keyword">boolean</span> selected)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<ol start="3">
<li><code>OnMonthChangedListener</code>：用来接听页面滑动的变化，这个有点名不副实，因为在周模式的时候，滑动页面是按周来变化的。</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * The callback used to indicate the user changes the displayed month</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">OnMonthChangedListener</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Called upon change of the selected day</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> widget the view associated with this listener</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> date   the month picked, as the first day of the month</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">onMonthChanged</span><span class="params">(MaterialCalendarView widget, CalendarDay date)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="4">
<li><code>getSelectedDate()</code>：获取被选中的日期。</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> String <span class="title">getSelectedDatesString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    CalendarDay date = widget.getSelectedDate();</span><br><span class="line">    <span class="keyword">if</span> (date == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"No Selection"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> FORMATTER.format(date.getDate());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="三、修饰选中日期：BasicActivityDecorated"><a href="#三、修饰选中日期：BasicActivityDecorated" class="headerlink" title="三、修饰选中日期：BasicActivityDecorated"></a>三、修饰选中日期：BasicActivityDecorated</h4><ol>
<li>设置日期范围</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">widget.setShowOtherDates(MaterialCalendarView.SHOW_ALL);</span><br><span class="line">Calendar instance = Calendar.getInstance();</span><br><span class="line">widget.setSelectedDate(instance.getTime());</span><br><span class="line">Calendar instance1 = Calendar.getInstance();</span><br><span class="line">instance1.set(instance1.get(Calendar.YEAR), Calendar.JANUARY, <span class="number">1</span>);</span><br><span class="line">Calendar instance2 = Calendar.getInstance();</span><br><span class="line">instance2.set(instance2.get(Calendar.YEAR), Calendar.DECEMBER, <span class="number">31</span>);</span><br><span class="line">widget.state().edit()</span><br><span class="line">        .setMinimumDate(instance1.getTime())</span><br><span class="line">        .setMaximumDate(instance2.getTime())</span><br><span class="line">        .commit();</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>增加日期修饰</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">widget.addDecorators(</span><br><span class="line">        <span class="keyword">new</span> MySelectorDecorator(<span class="keyword">this</span>),</span><br><span class="line">        <span class="keyword">new</span> HighlightWeekendsDecorator(),</span><br><span class="line">        oneDayDecorator</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>案例提供了三种修饰：</p>
<ol>
<li>对选中日期增加指定背景图层</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MySelectorDecorator</span> <span class="keyword">implements</span> <span class="title">DayViewDecorator</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Drawable drawable;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MySelectorDecorator</span><span class="params">(Activity context)</span> </span>&#123;</span><br><span class="line">        drawable = context.getResources().getDrawable(R.drawable.my_selector);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">shouldDecorate</span><span class="params">(CalendarDay day)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">decorate</span><span class="params">(DayViewFacade view)</span> </span>&#123;</span><br><span class="line">        view.setSelectionDrawable(drawable);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>对周末增加指定背景图层</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Highlight Saturdays and Sundays with a background</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HighlightWeekendsDecorator</span> <span class="keyword">implements</span> <span class="title">DayViewDecorator</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Calendar calendar = Calendar.getInstance();</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Drawable highlightDrawable;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> color = Color.parseColor(<span class="string">"#228BC34A"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">HighlightWeekendsDecorator</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        highlightDrawable = <span class="keyword">new</span> ColorDrawable(color);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">shouldDecorate</span><span class="params">(CalendarDay day)</span> </span>&#123;</span><br><span class="line">        day.copyTo(calendar);</span><br><span class="line">        <span class="keyword">int</span> weekDay = calendar.get(Calendar.DAY_OF_WEEK);</span><br><span class="line">        <span class="keyword">return</span> weekDay == Calendar.SATURDAY || weekDay == Calendar.SUNDAY;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">decorate</span><span class="params">(DayViewFacade view)</span> </span>&#123;</span><br><span class="line">        view.setBackgroundDrawable(highlightDrawable);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>对选中日期增加指定修饰</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Decorate a day by making the text big and bold</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OneDayDecorator</span> <span class="keyword">implements</span> <span class="title">DayViewDecorator</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> CalendarDay date;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">OneDayDecorator</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        date = CalendarDay.today();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">shouldDecorate</span><span class="params">(CalendarDay day)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> date != <span class="keyword">null</span> &amp;&amp; day.equals(date);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">decorate</span><span class="params">(DayViewFacade view)</span> </span>&#123;</span><br><span class="line">        view.addSpan(<span class="keyword">new</span> StyleSpan(Typeface.BOLD));</span><br><span class="line">        view.addSpan(<span class="keyword">new</span> RelativeSizeSpan(<span class="number">3.0f</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * We're changing the internals, so make sure to call &#123;<span class="doctag">@linkplain</span> MaterialCalendarView#invalidateDecorators()&#125;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setDate</span><span class="params">(Date date)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.date = CalendarDay.from(date);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>对特定日期增加红点修饰</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Decorate several days with a dot</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EventDecorator</span> <span class="keyword">implements</span> <span class="title">DayViewDecorator</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> color;</span><br><span class="line">    <span class="keyword">private</span> HashSet&lt;CalendarDay&gt; dates;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">EventDecorator</span><span class="params">(<span class="keyword">int</span> color, Collection&lt;CalendarDay&gt; dates)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.color = color;</span><br><span class="line">        <span class="keyword">this</span>.dates = <span class="keyword">new</span> HashSet&lt;&gt;(dates);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">shouldDecorate</span><span class="params">(CalendarDay day)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> dates.contains(day);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">decorate</span><span class="params">(DayViewFacade view)</span> </span>&#123;</span><br><span class="line">        view.addSpan(<span class="keyword">new</span> DotSpan(<span class="number">5</span>, color));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="四、模式切换：SwappableBasicActivityDecorated"><a href="#四、模式切换：SwappableBasicActivityDecorated" class="headerlink" title="四、模式切换：SwappableBasicActivityDecorated"></a>四、模式切换：SwappableBasicActivityDecorated</h4><p>切换周模式、月模式</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@OnClick</span>(R.id.button_weeks)</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onSetWeekMode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    widget.state().edit()</span><br><span class="line">            .setCalendarDisplayMode(CalendarMode.WEEKS)</span><br><span class="line">            .commit();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@OnClick</span>(R.id.button_months)</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onSetMonthMode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    widget.state().edit()</span><br><span class="line">            .setCalendarDisplayMode(CalendarMode.MONTHS)</span><br><span class="line">            .commit();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="五、日期禁用：DisableDaysActivity"><a href="#五、日期禁用：DisableDaysActivity" class="headerlink" title="五、日期禁用：DisableDaysActivity"></a>五、日期禁用：DisableDaysActivity</h4><p>核心代码是：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">DayViewFacade view</span><br><span class="line">view.setDaysDisabled(<span class="keyword">true</span>);</span><br></pre></td></tr></table></figure>

<p>这个作者非常喜欢用<code>装饰模式</code>。所以对<code>DayViewFacade</code>的修饰可以无穷的累加。只要集成<code>DayViewDecorator</code>就可以。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Decorate Day views with drawables and text manipulation</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">DayViewDecorator</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Determine if a specific day should be decorated</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> day &#123;<span class="doctag">@linkplain</span> CalendarDay&#125; to possibly decorate</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> true if this decorator should be applied to the provided day</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">shouldDecorate</span><span class="params">(CalendarDay day)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Set decoration options onto a facade to be applied to all relevant days</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> view View to decorate</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">decorate</span><span class="params">(DayViewFacade view)</span></span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="六、透过xml自定义控件：CustomizeXmlActivity"><a href="#六、透过xml自定义控件：CustomizeXmlActivity" class="headerlink" title="六、透过xml自定义控件：CustomizeXmlActivity"></a>六、透过xml自定义控件：CustomizeXmlActivity</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">com.prolificinteractive.materialcalendarview.MaterialCalendarView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/calendarView"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:mcv_showOtherDates</span>=<span class="string">"all"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:mcv_arrowColor</span>=<span class="string">"?attr/colorPrimary"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:mcv_leftArrowMask</span>=<span class="string">"@drawable/ic_navigation_arrow_back"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:mcv_rightArrowMask</span>=<span class="string">"@drawable/ic_navigation_arrow_forward"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:mcv_selectionColor</span>=<span class="string">"?attr/colorPrimary"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:mcv_headerTextAppearance</span>=<span class="string">"?android:attr/textAppearanceMedium"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:mcv_dateTextAppearance</span>=<span class="string">"@style/CustomDayTextAppearance"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:mcv_weekDayTextAppearance</span>=<span class="string">"?android:attr/textAppearanceMedium"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:mcv_weekDayLabels</span>=<span class="string">"@array/custom_weekdays"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:mcv_monthLabels</span>=<span class="string">"@array/custom_months"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:mcv_tileSize</span>=<span class="string">"36dp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:mcv_firstDayOfWeek</span>=<span class="string">"thursday"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:mcv_calendarMode</span>=<span class="string">"week"</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<p>xml中能设置的属性很多，常用的如下：</p>
<ul>
<li>mcv_showOtherDates：日期范围</li>
<li>mcv_firstDayOfWeek：一周的第一天</li>
<li>mcv_calendarMode：日历模式</li>
</ul>
<h4 id="七、透过java自定义控件：CustomizeCodeActivity"><a href="#七、透过java自定义控件：CustomizeCodeActivity" class="headerlink" title="七、透过java自定义控件：CustomizeCodeActivity"></a>七、透过java自定义控件：CustomizeCodeActivity</h4><p>效果和xml是一致的。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">widget.setShowOtherDates(MaterialCalendarView.SHOW_ALL);</span><br><span class="line">widget.setArrowColor(getResources().getColor(R.color.sample_primary));</span><br><span class="line">widget.setLeftArrowMask(getResources().getDrawable(R.drawable.ic_navigation_arrow_back));</span><br><span class="line">widget.setRightArrowMask(getResources().getDrawable(R.drawable.ic_navigation_arrow_forward));</span><br><span class="line">widget.setSelectionColor(getResources().getColor(R.color.sample_primary));</span><br><span class="line">widget.setHeaderTextAppearance(R.style.TextAppearance_AppCompat_Medium);</span><br><span class="line">widget.setWeekDayTextAppearance(R.style.TextAppearance_AppCompat_Medium);</span><br><span class="line">widget.setDateTextAppearance(R.style.CustomDayTextAppearance);</span><br><span class="line">widget.setTitleFormatter(<span class="keyword">new</span> MonthArrayTitleFormatter(getResources().getTextArray(R.array.custom_months)));</span><br><span class="line">widget.setWeekDayFormatter(<span class="keyword">new</span> ArrayWeekDayFormatter(getResources().getTextArray(R.array.custom_weekdays)));</span><br><span class="line">widget.setTileSize((<span class="keyword">int</span>) TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, <span class="number">36</span>, getResources().getDisplayMetrics()));</span><br><span class="line"></span><br><span class="line">CalendarDay today = CalendarDay.from(<span class="number">2016</span>, <span class="number">5</span>, <span class="number">2</span>);</span><br><span class="line">widget.setCurrentDate(today);</span><br><span class="line">widget.setSelectedDate(today);</span><br><span class="line"></span><br><span class="line">widget.state().edit()</span><br><span class="line">        .setFirstDayOfWeek(Calendar.WEDNESDAY)</span><br><span class="line">        .setMinimumDate(CalendarDay.from(<span class="number">2016</span>, <span class="number">4</span>, <span class="number">3</span>))</span><br><span class="line">        .setMaximumDate(CalendarDay.from(<span class="number">2016</span>, <span class="number">5</span>, <span class="number">12</span>))</span><br><span class="line">        .setCalendarDisplayMode(CalendarMode.WEEKS)</span><br><span class="line">        .commit();</span><br></pre></td></tr></table></figure>

<h4 id="八、完整的设置展示DynamicSettersActivity"><a href="#八、完整的设置展示DynamicSettersActivity" class="headerlink" title="八、完整的设置展示DynamicSettersActivity"></a>八、完整的设置展示DynamicSettersActivity</h4><p><img src="/2018/02/02/Android%E5%A5%BD%E7%94%A8%E7%9A%84%E6%97%A5%E5%8E%86%E6%8E%A7%E4%BB%B6/2.png" alt="2"></p>
<h4 id="九、在Dialog中显示日历：DialogsActivity"><a href="#九、在Dialog中显示日历：DialogsActivity" class="headerlink" title="九、在Dialog中显示日历：DialogsActivity"></a>九、在Dialog中显示日历：DialogsActivity</h4><p><img src="/2018/02/02/Android%E5%A5%BD%E7%94%A8%E7%9A%84%E6%97%A5%E5%8E%86%E6%8E%A7%E4%BB%B6/3.png" alt="3"></p>
<h3 id="拓展：滑屏时自动选中日期"><a href="#拓展：滑屏时自动选中日期" class="headerlink" title="拓展：滑屏时自动选中日期"></a>拓展：滑屏时自动选中日期</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">widget.setOnDateChangedListener(<span class="keyword">new</span> OnDateSelectedListener() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onDateSelected</span><span class="params">(@NonNull MaterialCalendarView widget, @NonNull CalendarDay date, <span class="keyword">boolean</span> selected)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (selected &amp;&amp; date != <span class="keyword">null</span>)&#123;</span><br><span class="line">            dayOfWeek = date.getCalendar().get(Calendar.DAY_OF_WEEK);</span><br><span class="line">            dayofMonth = date.getCalendar().get(Calendar.DAY_OF_MONTH);</span><br><span class="line">        &#125;</span><br><span class="line">        Log.d(TAG, <span class="string">"date = "</span> + date);</span><br><span class="line">        Log.d(TAG, <span class="string">"dayOfWeek = "</span> + dayOfWeek);</span><br><span class="line">        Log.d(TAG, <span class="string">"dayofMonth = "</span> + dayofMonth);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">widget.setOnMonthChangedListener(<span class="keyword">new</span> OnMonthChangedListener() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onMonthChanged</span><span class="params">(<span class="keyword">final</span> MaterialCalendarView widget, CalendarDay date)</span> </span>&#123;</span><br><span class="line">        Calendar c = date.getCalendar();</span><br><span class="line">        Log.d(TAG, <span class="string">"date = "</span> + date);</span><br><span class="line">        Calendar now = c;</span><br><span class="line">        <span class="keyword">if</span> (widget.state().calendarMode == CalendarMode.WEEKS)&#123;</span><br><span class="line">            now.set(Calendar.DAY_OF_WEEK, c.get(Calendar.DAY_OF_WEEK) + dayOfWeek - <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            now.set(Calendar.DAY_OF_MONTH, c.get(Calendar.DAY_OF_MONTH) + dayofMonth - <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        CalendarDay nowDate = CalendarDay.from(now);</span><br><span class="line">        Log.d(TAG, <span class="string">"nowDate = "</span> + nowDate);</span><br><span class="line">        widget.setSelectedDate(nowDate);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">Calendar instance = Calendar.getInstance();</span><br><span class="line">widget.setSelectedDate(instance.getTime());</span><br></pre></td></tr></table></figure>



<p><a href="https://www.jianshu.com/p/8396a4d39c01" target="_blank" rel="noopener">原文链接</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://evan-yjq.github.io/2018/02/02/ListView%E5%88%86%E5%89%B2%E7%BA%BF%E8%AE%BE%E7%BD%AE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Evan">
      <meta itemprop="description" content="evan 互联网 程序员">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Evan的小院">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/02/02/ListView%E5%88%86%E5%89%B2%E7%BA%BF%E8%AE%BE%E7%BD%AE/" class="post-title-link" itemprop="url">Android 给ListView设置分割线与边界的距离</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2018-02-02 23:10:00 / Modified: 23:56:40" itemprop="dateCreated datePublished" datetime="2018-02-02T23:10:00+08:00">2018-02-02</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%AE%89%E5%8D%93/" itemprop="url" rel="index"><span itemprop="name">安卓</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>在Xml文件中<code>ListView</code>可通过配置</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">android:dividerline</span><br><span class="line">android:dividerHeight</span><br></pre></td></tr></table></figure>

<p>如果<code>divider</code>需要缩进，可以在<code>drawable</code>新建一个list_divider.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">layer-list</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span> &gt;</span>  </span><br><span class="line">	<span class="tag">&lt;<span class="name">item</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">shape</span> <span class="attr">android:shape</span>=<span class="string">"rectangle"</span> &gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">solid</span> <span class="attr">android:color</span>=<span class="string">"@color/list_background"</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">shape</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">item</span> <span class="attr">android:left</span>=<span class="string">"10dp"</span></span></span><br><span class="line"><span class="tag">		<span class="attr">android:right</span>=<span class="string">"10dp"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">shape</span> <span class="attr">android:shape</span>=<span class="string">"rectangle"</span> &gt;</span></span><br><span class="line">        	<span class="tag">&lt;<span class="name">solid</span> <span class="attr">android:color</span>=<span class="string">"@color/divider_color"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">shape</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">layer-list</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>然后在<code>ListView</code>中配置</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ListView</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:dividerHeight</span>=<span class="string">"@dimen/list_divider_height"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:divider</span>=<span class="string">"@drawable/list_divider"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">...</span></span></span><br><span class="line"><span class="tag">/&gt;</span></span><br></pre></td></tr></table></figure>

<p>另外list_divider.xml还有另一种写法：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">inset</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:insetLeft</span>=<span class="string">"10dp"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:insetRight</span>=<span class="string">"10dp"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:drawable</span>=<span class="string">"@color/divider_color"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">inset</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><code>ListView</code>中的配置方法与之前相同</p>
<p>另外<code>inset</code>属性定义嵌入的可绘制资源。它必须是根元素。 </p>
<p>属性（ATTRIBUTES）： </p>
<p><code>xmlns:android</code>:            字符串值，必须的。它定义了XML的命名空间，必须是：</p>
<p>​    <code>android:drawable</code>:        要绘制的资源，必须的，它指向一个要嵌入的可绘制资源。 </p>
<p>​    <code>android:insetTop</code>:        尺寸值。用尺寸值或Dimension资源定义顶部的嵌入位置。 </p>
<p>​    <code>android:insetRight</code>:        尺寸值。用尺寸值或Dimension资源定义右边的嵌入位置。 </p>
<p>​    <code>android:insetBottom</code>:        尺寸值。用尺寸值或Dimension资源定义底部的嵌入位置。 </p>
<p>​    <code>android:insetLeft</code>:        尺寸值。用尺寸值或Dimension资源定义左边的嵌入位置。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://evan-yjq.github.io/2018/01/31/%E3%80%90%E8%BD%AC%E8%BD%BD%E3%80%91CoordinatorLayout%E7%9A%84%E4%BD%BF%E7%94%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Evan">
      <meta itemprop="description" content="evan 互联网 程序员">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Evan的小院">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/01/31/%E3%80%90%E8%BD%AC%E8%BD%BD%E3%80%91CoordinatorLayout%E7%9A%84%E4%BD%BF%E7%94%A8/" class="post-title-link" itemprop="url">【转载】CoordinatorLayout的使用</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2018-01-31 02:12:00 / Modified: 02:30:12" itemprop="dateCreated datePublished" datetime="2018-01-31T02:12:00+08:00">2018-01-31</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%AE%89%E5%8D%93/" itemprop="url" rel="index"><span itemprop="name">安卓</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>在<a href="https://www.youtube.com/watch?v=7V-fIGMDsmE" target="_blank" rel="noopener">Google I/O 15</a>上，谷歌发布了一个新的<a href="http://android-developers.blogspot.com.es/2015/05/android-design-support-library.html" target="_blank" rel="noopener"> support library</a>，里面包含了一些遵循<a href="https://www.google.com/design/spec/material-design/introduction.html" target="_blank" rel="noopener">Material Design’s spec</a>的UI组件，比如，<code>AppbarLayout</code>, <code>CollapsingToolbarLayout</code> 和 <code>CoordinatorLayout</code>。 这些组件配合起来使用可以产生强大的效果，那么让我们通过这篇文章来学习如何使用这些组件。</p>
<h3 id="CoordinatorLayout"><a href="#CoordinatorLayout" class="headerlink" title="CoordinatorLayout"></a>CoordinatorLayout</h3><p>从名字可以看出，这个ViewGroup是用来协调它的子View的。看下图：</p>
<p><img src="/2018/01/31/%E3%80%90%E8%BD%AC%E8%BD%BD%E3%80%91CoordinatorLayout%E7%9A%84%E4%BD%BF%E7%94%A8/1.gif" alt="1.gif"></p>
<p>这个例子中的各个View相互影响，却被和谐的组织在了一起。这就是使用<code>CoordinatorLayout</code>最简单的实例：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">android.support.design.widget.CoordinatorLayout</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">"http://schemas.android.com/apk/res-auto"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:background</span>=<span class="string">"@android:color/background_light"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:fitsSystemWindows</span>=<span class="string">"true"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">android.support.design.widget.AppBarLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/main.appbar"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"300dp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:theme</span>=<span class="string">"@style/ThemeOverlay.AppCompat.Dark.ActionBar"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:fitsSystemWindows</span>=<span class="string">"true"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">android.support.design.widget.CollapsingToolbarLayout</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">"@+id/main.collapsing"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:layout_scrollFlags</span>=<span class="string">"scroll|exitUntilCollapsed"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:fitsSystemWindows</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:contentScrim</span>=<span class="string">"?attr/colorPrimary"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:expandedTitleMarginStart</span>=<span class="string">"48dp"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:expandedTitleMarginEnd</span>=<span class="string">"64dp"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">ImageView</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">"@+id/main.backdrop"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:scaleType</span>=<span class="string">"centerCrop"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:fitsSystemWindows</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:src</span>=<span class="string">"@drawable/material_flat"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:layout_collapseMode</span>=<span class="string">"parallax"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">android.support.v7.widget.Toolbar</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">"@+id/main.toolbar"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">"?attr/actionBarSize"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:popupTheme</span>=<span class="string">"@style/ThemeOverlay.AppCompat.Light"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:layout_collapseMode</span>=<span class="string">"pin"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">android.support.design.widget.CollapsingToolbarLayout</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">android.support.design.widget.AppBarLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">android.support.v4.widget.NestedScrollView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_behavior</span>=<span class="string">"@string/appbar_scrolling_view_behavior"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textSize</span>=<span class="string">"20sp"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:lineSpacingExtra</span>=<span class="string">"8dp"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">"@string/lorem"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:padding</span>=<span class="string">"@dimen/activity_horizontal_margin"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">android.support.v4.widget.NestedScrollView</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">android.support.design.widget.FloatingActionButton</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_margin</span>=<span class="string">"@dimen/activity_horizontal_margin"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:src</span>=<span class="string">"@drawable/ic_comment_24dp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_anchor</span>=<span class="string">"@id/main.appbar"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_anchorGravity</span>=<span class="string">"bottom|right|end"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">android.support.design.widget.CoordinatorLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>看一下上面Layout的结构，<code>CoordinatorLayout</code>包含三个子View： 一个<code>AppbarLayout</code>，一个scrolleable View，一个指定了⚓锚点的<code>FloatingActionBar</code>。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">CoordinatorLayout</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">AppbarLayout</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scrollableView</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">FloatingActionButton</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">CoordinatorLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="AppBarLayout"><a href="#AppBarLayout" class="headerlink" title="AppBarLayout"></a>AppBarLayout</h3><p>首先，<code>AppBarLayout</code>是一个<code>LinearLayout</code>，它的子View默认纵向排列， 可以通过一些参数控制子View的滑动行为。这么说你还是很难理解，所以无图无真相，上GIF：</p>
<p><img src="/2018/01/31/%E3%80%90%E8%BD%AC%E8%BD%BD%E3%80%91CoordinatorLayout%E7%9A%84%E4%BD%BF%E7%94%A8/2.gif" alt="2.gif"></p>
<p>这张图最上面是一个可折叠图片（collapsing image），图片下面的蓝色View就是<code>AppBarLayout</code>，它包含了一个<code>Toolbar</code>，一个有标题和子标题的<code>LinearLayout</code>，一个带有Tab的<code>TabLayout</code>。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">AppBarLayout</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">CollapsingToolbarLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_scrollFlags</span>=<span class="string">"scroll|snap"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">Toolbar</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_scrollFlags</span>=<span class="string">"scroll|snap"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"+id/title_container"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_scrollFlags</span>=<span class="string">"scroll|enterAlways"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">TabLayout</span> /&gt;</span> <span class="comment">&lt;!-- no flags --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">AppBarLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><code>AppbarLayout</code>的直接子View的操控行为，可以通过给子View添加<code>layout_scrollFlags</code>属性来控制。关于这个属性的值：<code>scroll</code>，在这个例子中用到了这个值。如果一个子View没有赋值<code>scroll</code>，那么滑动的时候，它就会一直静态显示，而其他<code>scroll</code>的View就会被划到它的后面隐藏。</p>
<p>另一个值<code>snap</code>的作用是避免一个View停留在动画的中间状态，也就是说滑动结束的时候一个View要么全部显示，要么全部隐藏，不会展示View的部分。</p>
<p>上面的<code>LinearLayout</code>指定了<code>enterAlways</code>，所以下拉的时候，它就会一直出现。<code>TabLayout</code> 没有指定，所以它一直静态显示。</p>
<p>由此，给子View使用不同的<code>layout_scrollFlags</code>就会生成不同的<code>AppBarLayout</code>。全部属性值参照<a href="https://developer.android.com/intl/es/reference/android/support/design/widget/AppBarLayout.LayoutParams.html#CONSTANTS" target="_blank" rel="noopener">官方文档</a>，文章最后我也会提供几个放在Github上的实例。</p>
<h3 id="AppbarLayout-flags"><a href="#AppbarLayout-flags" class="headerlink" title="AppbarLayout flags"></a>AppbarLayout flags</h3><p>*SCROLL_FLAG_ENTER_ALWAYS：((entering) / (scrolling on screen))下拉的时候，这个View也会跟着滑出。</p>
<p>*SCROLL_FLAG_ENTER_ALWAYS_COLLAPSED：另一种<code>enterAlways</code>，但是只显示折叠后的高度。</p>
<p>*SCROLL_FLAG_EXIT_UNTIL_COLLAPSED：((exiting) / (scrolling off screen))上拉的时候，这个View会跟着滑动直到折叠。</p>
<p>*SCROLL_FLAG_SCROLL：跟着滑动方向滑动。</p>
<p>*SCROLL_FLAG_SNAP：滑动结束的时候，如果这个View部分显示，它就会滑动到离它最近的上边缘或下边缘。</p>
<h3 id="CoordinatorLayout-Behaviors"><a href="#CoordinatorLayout-Behaviors" class="headerlink" title="CoordinatorLayout Behaviors"></a>CoordinatorLayout Behaviors</h3><p>打开Android Studio (&gt;= 1.4)，用模版<code>Scrolling Activity</code>新建一个项目，然后直接编译运行。看到：</p>
<p><img src="/2018/01/31/%E3%80%90%E8%BD%AC%E8%BD%BD%E3%80%91CoordinatorLayout%E7%9A%84%E4%BD%BF%E7%94%A8/3.gif" alt="3.gif"></p>
<p>查看生成的代码，没发现滑动时候Fab大小变化动画的相关代码，Why？ 答案在<code>FloatingActionButton</code>的源代码中，感谢Android Studio v1.2自带了反编译源代码的功能，<code>ctrl/cmd + click</code>我们来<code>FloatingActionButton</code>的源码中究竟干了什么。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * Copyright (C) 2015 The Android Open Source Project</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *  Floating action buttons are used for a</span></span><br><span class="line"><span class="comment"> *  special type of promoted action. </span></span><br><span class="line"><span class="comment"> *  They are distinguished by a circled icon </span></span><br><span class="line"><span class="comment"> *  floating above the UI and have special motion behaviors </span></span><br><span class="line"><span class="comment"> *  related to morphing, launching, and the transferring anchor point.</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> *  blah.. blah.. </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@CoordinatorLayout</span>.DefaultBehavior(FloatingActionButton.Behavior<span class="class">.<span class="keyword">class</span>)</span></span><br><span class="line"><span class="class"><span class="title">public</span> <span class="title">class</span> <span class="title">FloatingActionButton</span> <span class="keyword">extends</span> <span class="title">ImageButton</span> </span>&#123;</span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Behavior</span> </span></span><br><span class="line"><span class="class">        <span class="keyword">extends</span> <span class="title">CoordinatorLayout</span>.<span class="title">Behavior</span>&lt;<span class="title">FloatingActionButton</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">updateFabVisibility</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">           CoordinatorLayout parent, AppBarLayout appBarLayout, </span></span></span><br><span class="line"><span class="function"><span class="params">           FloatingActionButton child &#123;</span></span></span><br><span class="line"><span class="function"><span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">           <span class="keyword">if</span> (a <span class="keyword">long</span> condition)</span> </span>&#123;</span><br><span class="line">                <span class="comment">// If the anchor's bottom is below the seam, </span></span><br><span class="line">                <span class="comment">// we'll animate our FAB out</span></span><br><span class="line">                child.hide();</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">// Else, we'll animate our FAB back in</span></span><br><span class="line">                child.show();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>其实那个大小变化动画是design包中的<code>Behavior</code>控制的，上面的<code>CoordinatorLayout.Behavior&lt;FloatingAcctionButton&gt;</code>控制显示或隐藏FAB，interesting？</p>
<h3 id="SwipeDismissBehavior"><a href="#SwipeDismissBehavior" class="headerlink" title="SwipeDismissBehavior"></a>SwipeDismissBehavior</h3><p>在 design support library 中，我们发现了<code>SwipeDismissBehavior</code>，有了它，我们可以在<code>CoordinatorLayout</code>中轻松实现滑动删除功能。</p>
<p><img src="/2018/01/31/%E3%80%90%E8%BD%AC%E8%BD%BD%E3%80%91CoordinatorLayout%E7%9A%84%E4%BD%BF%E7%94%A8/4.gif" alt="4.gif"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">    setContentView(R.layout.activity_swipe_behavior);</span><br><span class="line">    mCardView = (CardView) findViewById(R.id.swype_card);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">final</span> SwipeDismissBehavior&lt;CardView&gt; swipe = <span class="keyword">new</span> SwipeDismissBehavior();</span><br><span class="line"></span><br><span class="line">        swipe.setSwipeDirection(SwipeDismissBehavior.SWIPE_DIRECTION_ANY);</span><br><span class="line"></span><br><span class="line">        swipe.setListener(</span><br><span class="line">            <span class="keyword">new</span> SwipeDismissBehavior.OnDismissListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onDismiss</span><span class="params">(View view)</span> </span>&#123;</span><br><span class="line">                Toast.makeText(SwipeBehaviorExampleActivity.<span class="keyword">this</span>,</span><br><span class="line">                    <span class="string">"Card swiped !!"</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span> </span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onDragStateChanged</span><span class="params">(<span class="keyword">int</span> state)</span> </span>&#123;&#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        LayoutParams coordinatorParams = (LayoutParams) mCardView.getLayoutParams();</span><br><span class="line"></span><br><span class="line">        coordinatorParams.setBehavior(swipe);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h3 id="Custom-Behaviors"><a href="#Custom-Behaviors" class="headerlink" title="Custom Behaviors"></a>Custom Behaviors</h3><p>自定义Behavior并不难，首先介绍两个元素：child 和 dependency。</p>
<p><img src="/2018/01/31/%E3%80%90%E8%BD%AC%E8%BD%BD%E3%80%91CoordinatorLayout%E7%9A%84%E4%BD%BF%E7%94%A8/5.png" alt="5.png"></p>
<h4 id="Childs-and-dependencies"><a href="#Childs-and-dependencies" class="headerlink" title="Childs and dependencies"></a>Childs and dependencies</h4><p>要改变行为的那个View就是child，dependency是作为触发器影响child的那个View。这个例子中child是<code>ImageView</code>，dependency是<code>Toolbar</code>，然后，<code>Toolbar</code>滑动的时候，<code>ImageView</code>跟着滑动。</p>
<p><img src="/2018/01/31/%E3%80%90%E8%BD%AC%E8%BD%BD%E3%80%91CoordinatorLayout%E7%9A%84%E4%BD%BF%E7%94%A8/6.gif" alt="6.gif"></p>
<p>下面开始创建自定义Behavior，首先，继承<code>CoordinatorLayout.Behavior&lt;T&gt;</code>，<code>T</code>就是child的类型，上面例子是那个ImageView，然后我们重写方法 *layoutDependsOn *onDependentViewChanged 每当UI变化的时候就会调用<code>layoutDependsOn</code>，鉴定完dependency后一定要返回true。上面例子中用户一滑动就会自动调用<code>layoutDependsOn</code>，然后开始控制child 的行为。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">layoutDependsOn</span><span class="params">(CoordinatorLayout parent, </span></span></span><br><span class="line"><span class="function"><span class="params">	CircleImageView, child, View dependency)</span> </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> dependency <span class="keyword">instanceof</span> Toolbar; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>layoutDependsOn</code>返回true后就开始调用<code>onDependentViewChanged</code>，在这个方法中我们利用dependency来实现动画，转换，动作。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onDependentViewChanged</span><span class="params">(CoordinatorLayout parent, </span></span></span><br><span class="line"><span class="function"><span class="params">		CircleImageView avatar, View dependency)</span> </span>&#123;</span><br><span class="line">	modifyAvatarDependingDependencyState(avatar, dependency);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">modifyAvatarDependingDependencyState</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">    CircleImageView avatar, View dependency)</span> </span>&#123;</span><br><span class="line">	<span class="comment">//  avatar.setY(dependency.getY());</span></span><br><span class="line">	<span class="comment">//  avatar.setBlahBlat(dependency.blah / blah);</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>放在一起就是：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">AvatarImageBehavior</span> <span class="keyword">extends</span> <span class="title">CoordinatorLayout</span>.<span class="title">Behavior</span>&lt;<span class="title">CircleImageView</span>&gt; </span>&#123;</span><br><span class="line">  </span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">layoutDependsOn</span><span class="params">(CoordinatorLayout parent, </span></span></span><br><span class="line"><span class="function"><span class="params">			CircleImageView, child, View dependency)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> dependency <span class="keyword">instanceof</span> Toolbar; </span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onDependentViewChanged</span><span class="params">(CoordinatorLayout parent, </span></span></span><br><span class="line"><span class="function"><span class="params">			CircleImageView avatar, View dependency)</span> </span>&#123;</span><br><span class="line">		modifyAvatarDependingDependencyState(avatar, dependency);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">modifyAvatarDependingDependencyState</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params"> 			CircleImageView avatar, View dependency)</span> </span>&#123;</span><br><span class="line">		<span class="comment">//  avatar.setY(dependency.getY());</span></span><br><span class="line">        <span class="comment">//  avatar.setBlahBlah(dependency.blah / blah);</span></span><br><span class="line">	&#125;    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a href="http://saulmm.github.io/mastering-coordinator" target="_blank" rel="noopener">原文</a></p>
<h3 id="Resources"><a href="#Resources" class="headerlink" title="Resources"></a>Resources</h3><p>＊<a href="https://github.com/saulmm/CoordinatorBehaviorExample" target="_blank" rel="noopener">Coordinator Behavior Example</a>- Github</p>
<p>＊<a href="https://github.com/saulmm/CoordinatorExamples" target="_blank" rel="noopener">Coordinator Examples</a>- Github</p>
<p>＊<a href="https://lab.getbase.com/introduction-to-coordinator-layout-on-android/" target="_blank" rel="noopener">Introduction to coordinator layout on Android</a>- Grzesiek Gajewski</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://evan-yjq.github.io/2018/01/30/%E5%AE%89%E5%8D%93dimen%E8%8E%B7%E5%8F%96/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Evan">
      <meta itemprop="description" content="evan 互联网 程序员">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Evan的小院">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/01/30/%E5%AE%89%E5%8D%93dimen%E8%8E%B7%E5%8F%96/" class="post-title-link" itemprop="url">getDimension,getDimensionPixelOffset和getDimensionPixelSize的一点说明</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-01-30 17:50:00" itemprop="dateCreated datePublished" datetime="2018-01-30T17:50:00+08:00">2018-01-30</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2018-03-09 23:59:48" itemprop="dateModified" datetime="2018-03-09T23:59:48+08:00">2018-03-09</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%AE%89%E5%8D%93/" itemprop="url" rel="index"><span itemprop="name">安卓</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>getDimension和getDimensionPixelOffset的功能类似，都是获取某个dimen的值，但是如果单位是dp或sp，则需要将其乘以density，如果是px，则不乘。并且getDimension返回float，getDimensionPixelOffset返回int。而getDimensionPixelSize则不管写的是dp还是sp还是px,都会乘以denstiy。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dimen</span> <span class="attr">name</span>=<span class="string">"dp_01"</span>&gt;</span>16dp<span class="tag">&lt;/<span class="name">dimen</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dimen</span> <span class="attr">name</span>=<span class="string">"px_01"</span>&gt;</span>16px<span class="tag">&lt;/<span class="name">dimen</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dimen</span> <span class="attr">name</span>=<span class="string">"sp_01"</span>&gt;</span>16sp<span class="tag">&lt;/<span class="name">dimen</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">float</span> a1=getResources().getDimension(R.dimen.dp_01);</span><br><span class="line"><span class="keyword">int</span> a2=getResources().getDimensionPixelOffset(R.dimen.dp_01);</span><br><span class="line"><span class="keyword">int</span> a3=getResources().getDimensionPixelSize(R.dimen.dp_01);</span><br><span class="line"><span class="keyword">float</span> b1=getResources().getDimension(R.dimen.px_01);</span><br><span class="line"><span class="keyword">int</span> b2=getResources().getDimensionPixelOffset(R.dimen.px_01);</span><br><span class="line"><span class="keyword">int</span> b3=getResources().getDimensionPixelSize(R.dimen.px_01);</span><br><span class="line"></span><br><span class="line"><span class="keyword">float</span> c1=getResources().getDimension(R.dimen.sp_01);</span><br><span class="line"><span class="keyword">int</span> c2=getResources().getDimensionPixelOffset(R.dimen.sp_01);</span><br><span class="line"><span class="keyword">int</span> c3=getResources().getDimensionPixelSize(R.dimen.sp_01);</span><br><span class="line"></span><br><span class="line">Log.d(<span class="string">"test"</span>, <span class="string">"getDimension= "</span>+a1+<span class="string">", getDimensionPixelOffset="</span>+a2+<span class="string">",getDimensionPixelSize="</span>+a3);</span><br><span class="line">Log.d(<span class="string">"test"</span>, <span class="string">"getDimension= "</span>+b1+<span class="string">", getDimensionPixelOffset="</span>+b2+<span class="string">",getDimensionPixelSize="</span>+b3);</span><br><span class="line">Log.d(<span class="string">"test"</span>, <span class="string">"getDimension= "</span>+c1+<span class="string">", getDimensionPixelOffset="</span>+c2+<span class="string">",getDimensionPixelSize="</span>+c3);</span><br></pre></td></tr></table></figure>
<p>LogCat中查看输出结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;Device (480*800,240dpi,density&#x3D;1.5):</span><br><span class="line">getDimension&#x3D; 24.0, getDimensionPixelOffset&#x3D;24,getDimensionPixelSize&#x3D;24</span><br><span class="line">getDimension&#x3D; 16.0, getDimensionPixelOffset&#x3D;16,getDimensionPixelSize&#x3D;24</span><br><span class="line">getDimension&#x3D; 24.0, getDimensionPixelOffset&#x3D;24,getDimensionPixelSize&#x3D;24</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://evan-yjq.github.io/2018/01/27/%E5%AF%B9%E8%B0%B7%E6%AD%8C%E7%A4%BA%E4%BE%8Btodoapp%E7%9A%84%E8%AF%A6%E8%A7%A31/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Evan">
      <meta itemprop="description" content="evan 互联网 程序员">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Evan的小院">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/01/27/%E5%AF%B9%E8%B0%B7%E6%AD%8C%E7%A4%BA%E4%BE%8Btodoapp%E7%9A%84%E8%AF%A6%E8%A7%A31/" class="post-title-link" itemprop="url">对谷歌示例todo-mvp-clean的详解1</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-01-27 19:08:00" itemprop="dateCreated datePublished" datetime="2018-01-27T19:08:00+08:00">2018-01-27</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2018-02-02 23:56:15" itemprop="dateModified" datetime="2018-02-02T23:56:15+08:00">2018-02-02</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%AE%89%E5%8D%93/" itemprop="url" rel="index"><span itemprop="name">安卓</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://evan-yjq.github.io/2018/01/24/%E5%B0%8F%E9%99%A2%E5%BC%80%E5%B7%A5%E5%95%A6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Evan">
      <meta itemprop="description" content="evan 互联网 程序员">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Evan的小院">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/01/24/%E5%B0%8F%E9%99%A2%E5%BC%80%E5%B7%A5%E5%95%A6/" class="post-title-link" itemprop="url">小院开工啦</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-01-24 14:49:00" itemprop="dateCreated datePublished" datetime="2018-01-24T14:49:00+08:00">2018-01-24</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2018-02-02 23:56:28" itemprop="dateModified" datetime="2018-02-02T23:56:28+08:00">2018-02-02</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="从今天起，Evan-的小院正式开工啦，我会为小院添砖加瓦，欢迎大家常来小院逛一逛。一起学习，一起努力。hiahiahiahia～嗝"><a href="#从今天起，Evan-的小院正式开工啦，我会为小院添砖加瓦，欢迎大家常来小院逛一逛。一起学习，一起努力。hiahiahiahia～嗝" class="headerlink" title="从今天起，Evan 的小院正式开工啦，我会为小院添砖加瓦，欢迎大家常来小院逛一逛。一起学习，一起努力。hiahiahiahia～嗝"></a>从今天起，Evan 的小院正式开工啦，我会为小院添砖加瓦，欢迎大家常来小院逛一逛。一起学习，一起努力。hiahiahiahia～嗝</h2>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Evan</p>
  <div class="site-description" itemprop="description">evan 互联网 程序员</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">17</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">9</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">15</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Evan</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
